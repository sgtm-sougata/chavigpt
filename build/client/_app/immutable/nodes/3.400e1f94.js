import{s as w,v as M,a as b,U as v,g as f,c as S,i as E,Z as C,f as P,b as y,M as A}from"../chunks/boolean_attributes.9921dbdc.js";import{S as $,i as k,b as O,c as R,a as j,m as I,d as N}from"../chunks/index.369f2cd8.js";import{g as T}from"../chunks/close.b8c63ca1.js";import{e as p}from"../chunks/singletons.87a67235.js";import{P as U}from"../chunks/index.449a376b.js";import{f as u,C as q,p as B}from"../chunks/pendingMessage.3a5bb898.js";import{e as _,E as G}from"../chunks/Logo.1e236891.js";import{u as J}from"../chunks/settings.b07edce2.js";function L(t){let r,o,a,i;document.title=U;function d(e){t[6](e)}let l={loading:t[1],currentModel:u([...t[0].models,...t[0].oldModels],t[3].activeModel),models:t[0].models};return t[2]!==void 0&&(l.files=t[2]),o=new q({props:l}),M.push(()=>O(o,"files",d)),o.$on("message",t[7]),{c(){r=b(),R(o.$$.fragment)},l(e){v("svelte-1o4lg8n",document.head).forEach(f),r=S(e),j(o.$$.fragment,e)},m(e,n){E(e,r,n),I(o,e,n),i=!0},p(e,[n]){const c={};n&2&&(c.loading=e[1]),n&9&&(c.currentModel=u([...e[0].models,...e[0].oldModels],e[3].activeModel)),n&1&&(c.models=e[0].models),!a&&n&4&&(a=!0,c.files=e[2],C(()=>a=!1)),o.$set(c)},i(e){i||(P(o.$$.fragment,e),i=!0)},o(e){y(o.$$.fragment,e),i=!1},d(e){e&&f(r),N(o,e)}}}function W(t,r,o){let a,{data:i}=r,d=!1,l=[];const e=J();A(t,e,s=>o(3,a=s));async function n(s){try{o(1,d=!0);const m=await fetch(`${p}/conversation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a.activeModel,preprompt:a.customPrompts[a.activeModel]})});if(!m.ok){_.set("Error while creating conversation, try again."),console.error("Error while creating conversation: "+await m.text());return}const{conversationId:h}=await m.json();B.set({content:s,files:l}),await T(`${p}/conversation/${h}`,{invalidateAll:!0})}catch(m){_.set(G.default),console.error(m)}finally{o(1,d=!1)}}function c(s){l=s,o(2,l)}const g=s=>n(s.detail);return t.$$set=s=>{"data"in s&&o(0,i=s.data)},[i,d,l,a,e,n,c,g]}class X extends ${constructor(r){super(),k(this,r,W,L,w,{data:0})}}export{X as component};
