import{s as ne,x as te,y as X,H as Ee,z as Y,l as x,A as Ce,g as v,B as fe,i as D,C as ee,D as de,E as Re,j as k,a as H,p as he,k as w,c as U,q as me,m as i,F as p,G as re,r as ve,I as Ke,J as Fe,K as qe,f as A,b as S,L as Te,M as ue,N as Je,v as xe,u as _e,d as pe,O as ce,P as be,Q as We,e as ye,R as Ne,S as et,T as Le,U as tt,V as rt,W as se}from"../chunks/boolean_attributes.9921dbdc.js";import{S as ae,i as le,c as K,a as F,m as q,d as J}from"../chunks/index.369f2cd8.js";import{C as Qe,g as Ae,i as De}from"../chunks/close.b8c63ca1.js";import{n as nt,p as Xe}from"../chunks/stores.acee8332.js";import{e as j}from"../chunks/singletons.87a67235.js";import{P as ke,a as at,f as Me,b as Q}from"../chunks/index.449a376b.js";import{i as lt,U as Oe,s as Be,t as Ie}from"../chunks/titleUpdate.b9dbf5b1.js";import{L as st,e as ie}from"../chunks/Logo.1e236891.js";import{g as $e,c as ot}from"../chunks/settings.b07edce2.js";import{e as we}from"../chunks/each.623f0545.js";import{C as it}from"../chunks/checkmark.484d3311.js";import{T as ut}from"../chunks/trash-can.5da0256d.js";const ct=!0,ft=ct;function dt(n){let e,r,t='<path fill="currentColor" d="M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"/>',a=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],l={};for(let s=0;s<a.length;s+=1)l=te(l,a[s]);return{c(){e=X("svg"),r=new Ee(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,width:!0,height:!0});var d=x(e);r=Ce(d,!0),d.forEach(v),this.h()},h(){r.a=null,fe(e,l)},m(s,d){D(s,e,d),r.m(t,e)},p(s,[d]){fe(e,l=$e(a,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},d&1&&s[0]]))},i:ee,o:ee,d(s){s&&v(e)}}}function ht(n,e,r){return n.$$set=t=>{r(0,e=te(te({},e),de(t)))},e=de(e),[e]}class mt extends ae{constructor(e){super(),le(this,e,ht,dt,ne,{})}}function gt(n){let e,r,t='<path fill="currentColor" d="M6 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6z"/>',a=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],l={};for(let s=0;s<a.length;s+=1)l=te(l,a[s]);return{c(){e=X("svg"),r=new Ee(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,width:!0,height:!0});var d=x(e);r=Ce(d,!0),d.forEach(v),this.h()},h(){r.a=null,fe(e,l)},m(s,d){D(s,e,d),r.m(t,e)},p(s,[d]){fe(e,l=$e(a,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},d&1&&s[0]]))},i:ee,o:ee,d(s){s&&v(e)}}}function vt(n,e,r){return n.$$set=t=>{r(0,e=te(te({},e),de(t)))},e=de(e),[e]}class _t extends ae{constructor(e){super(),le(this,e,vt,gt,ne,{})}}function pt(n){let e,r,t,a,l,s,d,f,c,u,h,o,N,y,T,M,V,C,$;t=new _t({}),c=new mt({}),y=new Qe({});const O=n[7].default,P=Re(O,n,n[6],null);return{c(){e=k("nav"),r=k("button"),K(t.$$.fragment),a=H(),l=k("span"),s=he(n[0]),d=H(),f=k("a"),K(c.$$.fragment),u=H(),h=k("nav"),o=k("div"),N=k("button"),K(y.$$.fragment),T=H(),P&&P.c(),this.h()},l(E){e=w(E,"NAV",{class:!0});var L=x(e);r=w(L,"BUTTON",{type:!0,class:!0,"aria-label":!0});var R=x(r);F(t.$$.fragment,R),R.forEach(v),a=U(L),l=w(L,"SPAN",{class:!0});var g=x(l);s=me(g,n[0]),g.forEach(v),d=U(L),f=w(L,"A",{href:!0,class:!0});var z=x(f);F(c.$$.fragment,z),z.forEach(v),L.forEach(v),u=U(E),h=w(E,"NAV",{class:!0});var b=x(h);o=w(b,"DIV",{class:!0});var Z=x(o);N=w(Z,"BUTTON",{type:!0,class:!0,"aria-label":!0});var G=x(N);F(y.$$.fragment,G),G.forEach(v),Z.forEach(v),T=U(b),P&&P.l(b),b.forEach(v),this.h()},h(){i(r,"type","button"),i(r,"class","-ml-3 flex h-9 w-9 shrink-0 items-center justify-center"),i(r,"aria-label","Open menu"),i(l,"class","truncate px-4"),i(f,"href",`${j}/`),i(f,"class","-mr-3 flex h-9 w-9 shrink-0 items-center justify-center"),i(e,"class","flex h-12 items-center justify-between border-b bg-gray-50 px-4 dark:border-gray-800 dark:bg-gray-800/70 md:hidden"),i(N,"type","button"),i(N,"class","-mr-3 ml-auto flex h-9 w-9 items-center justify-center"),i(N,"aria-label","Close menu"),i(o,"class","flex h-12 items-center px-4"),i(h,"class",M="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(n[1]?"block":"hidden"))},m(E,L){D(E,e,L),p(e,r),q(t,r,null),n[9](r),p(e,a),p(e,l),p(l,s),p(e,d),p(e,f),q(c,f,null),D(E,u,L),D(E,h,L),p(h,o),p(o,N),q(y,N,null),n[11](N),p(h,T),P&&P.m(h,null),V=!0,C||($=[re(r,"click",n[8]),re(N,"click",n[10])],C=!0)},p(E,[L]){(!V||L&1)&&ve(s,E[0]),P&&P.p&&(!V||L&64)&&Ke(P,O,E,E[6],V?qe(O,E[6],L,null):Fe(E[6]),null),(!V||L&2&&M!==(M="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(E[1]?"block":"hidden")))&&i(h,"class",M)},i(E){V||(A(t.$$.fragment,E),A(c.$$.fragment,E),A(y.$$.fragment,E),A(P,E),V=!0)},o(E){S(t.$$.fragment,E),S(c.$$.fragment,E),S(y.$$.fragment,E),S(P,E),V=!1},d(E){E&&(v(e),v(u),v(h)),J(t),n[9](null),J(c),J(y),n[11](null),P&&P.d(E),C=!1,Te($)}}}function bt(n,e,r){let t;ue(n,nt,T=>r(5,t=T));let{$$slots:a={},$$scope:l}=e,{isOpen:s=!1}=e,{title:d}=e,f,c;const u=Je(),h=()=>u("toggle",!0);function o(T){xe[T?"unshift":"push"](()=>{c=T,r(3,c)})}const N=()=>u("toggle",!1);function y(T){xe[T?"unshift":"push"](()=>{f=T,r(2,f)})}return n.$$set=T=>{"isOpen"in T&&r(1,s=T.isOpen),"title"in T&&r(0,d=T.title),"$$scope"in T&&r(6,l=T.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(0,d=d||"New Chat"),n.$$.dirty&32&&t&&u("toggle",!1),n.$$.dirty&14&&(s&&f?f.focus():!s&&ft&&document.activeElement===f&&c.focus())},[d,s,f,c,u,t,l,a,h,o,N,y]}class yt extends ae{constructor(e){super(),le(this,e,bt,pt,ne,{isOpen:1,title:0})}}function kt(){const{classList:n}=document.querySelector("html"),e=document.querySelector('meta[name="theme-color"]');n.contains("dark")?(n.remove("dark"),e.setAttribute("content","rgb(249, 250, 251)"),localStorage.theme="light"):(n.add("dark"),e.setAttribute("content","rgb(26, 36, 50)"),localStorage.theme="dark")}function wt(n){let e,r,t='<path fill="currentColor" d="M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z"/>',a=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],l={};for(let s=0;s<a.length;s+=1)l=te(l,a[s]);return{c(){e=X("svg"),r=new Ee(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,width:!0,height:!0});var d=x(e);r=Ce(d,!0),d.forEach(v),this.h()},h(){r.a=null,fe(e,l)},m(s,d){D(s,e,d),r.m(t,e)},p(s,[d]){fe(e,l=$e(a,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},d&1&&s[0]]))},i:ee,o:ee,d(s){s&&v(e)}}}function Tt(n,e,r){return n.$$set=t=>{r(0,e=te(te({},e),de(t)))},e=de(e),[e]}class Et extends ae{constructor(e){super(),le(this,e,Tt,wt,ne,{})}}function Se(n){let e,r="Delete";return{c(){e=k("span"),e.textContent=r,this.h()},l(t){e=w(t,"SPAN",{class:!0,["data-svelte-h"]:!0}),ce(e)!=="svelte-1mt4bpd"&&(e.textContent=r),this.h()},h(){i(e,"class","font-semibold")},m(t,a){D(t,e,a)},d(t){t&&v(e)}}}function Ct(n){let e,r,t,a,l,s,d,f;return r=new Et({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),l=new ut({props:{class:"text-xs text-gray-400  hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=k("button"),K(r.$$.fragment),t=H(),a=k("button"),K(l.$$.fragment),this.h()},l(c){e=w(c,"BUTTON",{type:!0,class:!0,title:!0});var u=x(e);F(r.$$.fragment,u),u.forEach(v),t=U(c),a=w(c,"BUTTON",{type:!0,class:!0,title:!0});var h=x(a);F(l.$$.fragment,h),h.forEach(v),this.h()},h(){i(e,"type","button"),i(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(e,"title","Edit conversation title"),i(a,"type","button"),i(a,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(a,"title","Delete conversation")},m(c,u){D(c,e,u),q(r,e,null),D(c,t,u),D(c,a,u),q(l,a,null),s=!0,d||(f=[re(e,"click",be(n[6])),re(a,"click",be(n[7]))],d=!0)},p:ee,i(c){s||(A(r.$$.fragment,c),A(l.$$.fragment,c),s=!0)},o(c){S(r.$$.fragment,c),S(l.$$.fragment,c),s=!1},d(c){c&&(v(e),v(t),v(a)),J(r),J(l),d=!1,Te(f)}}}function $t(n){let e,r,t,a,l,s,d,f;return r=new it({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),l=new Qe({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=k("button"),K(r.$$.fragment),t=H(),a=k("button"),K(l.$$.fragment),this.h()},l(c){e=w(c,"BUTTON",{type:!0,class:!0,title:!0});var u=x(e);F(r.$$.fragment,u),u.forEach(v),t=U(c),a=w(c,"BUTTON",{type:!0,class:!0,title:!0});var h=x(a);F(l.$$.fragment,h),h.forEach(v),this.h()},h(){i(e,"type","button"),i(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(e,"title","Confirm delete action"),i(a,"type","button"),i(a,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(a,"title","Cancel delete action")},m(c,u){D(c,e,u),q(r,e,null),D(c,t,u),D(c,a,u),q(l,a,null),s=!0,d||(f=[re(e,"click",be(n[4])),re(a,"click",be(n[5]))],d=!0)},p:ee,i(c){s||(A(r.$$.fragment,c),A(l.$$.fragment,c),s=!0)},o(c){S(r.$$.fragment,c),S(l.$$.fragment,c),s=!1},d(c){c&&(v(e),v(t),v(a)),J(r),J(l),d=!1,Te(f)}}}function xt(n){let e,r,t,a=n[0].title+"",l,s,d,f,c,u,h,o,N,y=n[1]&&Se();const T=[$t,Ct],M=[];function V(C,$){return C[1]?0:1}return d=V(n),f=M[d]=T[d](n),{c(){e=k("a"),r=k("div"),y&&y.c(),t=H(),l=he(a),s=H(),f.c(),this.h()},l(C){e=w(C,"A",{"data-sveltekit-noscroll":!0,href:!0,class:!0});var $=x(e);r=w($,"DIV",{class:!0});var O=x(r);y&&y.l(O),t=U(O),l=me(O,a),O.forEach(v),s=U($),f.l($),$.forEach(v),this.h()},h(){i(r,"class","flex-1 truncate"),i(e,"data-sveltekit-noscroll",""),i(e,"href",c=j+"/conversation/"+n[0].id),i(e,"class",u="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(n[0].id===n[2].params.id?"bg-gray-100 dark:bg-gray-700":""))},m(C,$){D(C,e,$),p(e,r),y&&y.m(r,null),p(r,t),p(r,l),p(e,s),M[d].m(e,null),h=!0,o||(N=re(e,"mouseleave",n[8]),o=!0)},p(C,[$]){C[1]?y||(y=Se(),y.c(),y.m(r,t)):y&&(y.d(1),y=null),(!h||$&1)&&a!==(a=C[0].title+"")&&ve(l,a);let O=d;d=V(C),d===O?M[d].p(C,$):(_e(),S(M[O],1,1,()=>{M[O]=null}),pe(),f=M[d],f?f.p(C,$):(f=M[d]=T[d](C),f.c()),A(f,1),f.m(e,null)),(!h||$&1&&c!==(c=j+"/conversation/"+C[0].id))&&i(e,"href",c),(!h||$&5&&u!==(u="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(C[0].id===C[2].params.id?"bg-gray-100 dark:bg-gray-700":"")))&&i(e,"class",u)},i(C){h||(A(f),h=!0)},o(C){S(f),h=!1},d(C){C&&v(e),y&&y.d(),M[d].d(),o=!1,N()}}}function Nt(n,e,r){let t;ue(n,Xe,o=>r(2,t=o));let{conv:a}=e,l=!1;const s=Je(),d=()=>s("deleteConversation",a.id),f=()=>{r(1,l=!1)},c=()=>{const o=prompt("Edit this conversation title:",a.title);o&&s("editConversationTitle",{id:a.id,title:o})},u=o=>{o.shiftKey?s("deleteConversation",a.id):r(1,l=!0)},h=()=>{r(1,l=!1)};return n.$$set=o=>{"conv"in o&&r(0,a=o.conv)},[a,l,t,s,d,f,c,u,h]}class Lt extends ae{constructor(e){super(),le(this,e,Nt,xt,ne,{conv:0})}}function ze(n,e,r){const t=n.slice();return t[9]=e[r][0],t[10]=e[r][1],t}function Pe(n,e,r){const t=n.slice();return t[13]=e[r],t}function je(n){let e,r=n[4][n[9]]+"",t,a,l,s,d=we(n[10]),f=[];for(let u=0;u<d.length;u+=1)f[u]=He(Pe(n,d,u));const c=u=>S(f[u],1,1,()=>{f[u]=null});return{c(){e=k("h4"),t=he(r),a=H();for(let u=0;u<f.length;u+=1)f[u].c();l=ye(),this.h()},l(u){e=w(u,"H4",{class:!0});var h=x(e);t=me(h,r),h.forEach(v),a=U(u);for(let o=0;o<f.length;o+=1)f[o].l(u);l=ye(),this.h()},h(){i(e,"class","mb-1.5 mt-4 pl-0.5 text-sm text-gray-400 first:mt-0 dark:text-gray-500")},m(u,h){D(u,e,h),p(e,t),D(u,a,h);for(let o=0;o<f.length;o+=1)f[o]&&f[o].m(u,h);D(u,l,h),s=!0},p(u,h){if((!s||h&4)&&r!==(r=u[4][u[9]]+"")&&ve(t,r),h&4){d=we(u[10]);let o;for(o=0;o<d.length;o+=1){const N=Pe(u,d,o);f[o]?(f[o].p(N,h),A(f[o],1)):(f[o]=He(N),f[o].c(),A(f[o],1),f[o].m(l.parentNode,l))}for(_e(),o=d.length;o<f.length;o+=1)c(o);pe()}},i(u){if(!s){for(let h=0;h<d.length;h+=1)A(f[h]);s=!0}},o(u){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)S(f[h]);s=!1},d(u){u&&(v(e),v(a),v(l)),We(f,u)}}}function He(n){let e,r;return e=new Lt({props:{conv:n[13]}}),e.$on("editConversationTitle",n[6]),e.$on("deleteConversation",n[7]),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){q(e,t,a),r=!0},p(t,a){const l={};a&4&&(l.conv=t[13]),e.$set(l)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Ue(n){let e,r,t=n[10].length&&je(n);return{c(){t&&t.c(),e=ye()},l(a){t&&t.l(a),e=ye()},m(a,l){t&&t.m(a,l),D(a,e,l),r=!0},p(a,l){a[10].length?t?(t.p(a,l),l&4&&A(t,1)):(t=je(a),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(_e(),S(t,1,1,()=>{t=null}),pe())},i(a){r||(A(t),r=!0)},o(a){S(t),r=!1},d(a){a&&v(e),t&&t.d(a)}}}function Ve(n){var f,c;let e,r,t=(((f=n[1])==null?void 0:f.username)||((c=n[1])==null?void 0:c.email))+"",a,l,s,d="Sign Out";return{c(){e=k("form"),r=k("span"),a=he(t),l=H(),s=k("button"),s.textContent=d,this.h()},l(u){e=w(u,"FORM",{action:!0,method:!0,class:!0});var h=x(e);r=w(h,"SPAN",{class:!0});var o=x(r);a=me(o,t),o.forEach(v),l=U(h),s=w(h,"BUTTON",{type:!0,class:!0,["data-svelte-h"]:!0}),ce(s)!=="svelte-3rftc"&&(s.textContent=d),h.forEach(v),this.h()},h(){i(r,"class","flex h-9 flex-none shrink items-center gap-1.5 truncate pr-2 text-gray-500 dark:text-gray-400"),i(s,"type","submit"),i(s,"class","ml-auto h-6 flex-none items-center gap-1.5 rounded-md border bg-white px-2 text-gray-700 shadow-sm group-hover:flex hover:shadow-none dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 dark:hover:text-gray-300 md:hidden"),i(e,"action",j+"/logout"),i(e,"method","post"),i(e,"class","group flex items-center gap-1.5 rounded-lg pl-2.5 pr-2 hover:bg-gray-100 dark:hover:bg-gray-700")},m(u,h){D(u,e,h),p(e,r),p(r,a),p(e,l),p(e,s)},p(u,h){var o,N;h&2&&t!==(t=(((o=u[1])==null?void 0:o.username)||((N=u[1])==null?void 0:N.email))+"")&&ve(a,t)},d(u){u&&v(e)}}}function Ze(n){let e,r='<button type="submit" class="flex h-9 w-full flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700">Login</button>';return{c(){e=k("form"),e.innerHTML=r,this.h()},l(t){e=w(t,"FORM",{action:!0,method:!0,target:!0,["data-svelte-h"]:!0}),ce(e)!=="svelte-mo1hdo"&&(e.innerHTML=r),this.h()},h(){i(e,"action",j+"/login"),i(e,"method","POST"),i(e,"target","_parent")},m(t,a){D(t,e,a)},d(t){t&&v(e)}}}function At(n){var G,ge;let e,r,t,a,l,s,d,f="New Chat",c,u,h,o,N,y,T,M="Theme",V,C,$="Settings",O,P,E,L;t=new st({props:{classNames:"mr-1"}});let R=we(Object.entries(n[2])),g=[];for(let m=0;m<R.length;m+=1)g[m]=Ue(ze(n,R,m));const z=m=>S(g[m],1,1,()=>{g[m]=null});let b=(((G=n[1])==null?void 0:G.username)||((ge=n[1])==null?void 0:ge.email))&&Ve(n),Z=n[0]&&Ze();return{c(){e=k("div"),r=k("a"),K(t.$$.fragment),a=H(),l=he(ke),s=H(),d=k("a"),d.textContent=f,c=H(),u=k("div");for(let m=0;m<g.length;m+=1)g[m].c();h=H(),o=k("div"),b&&b.c(),N=H(),Z&&Z.c(),y=H(),T=k("button"),T.textContent=M,V=H(),C=k("a"),C.textContent=$,O=H(),this.h()},l(m){e=w(m,"DIV",{class:!0});var _=x(e);r=w(_,"A",{class:!0,href:!0});var I=x(r);F(t.$$.fragment,I),a=U(I),l=me(I,ke),I.forEach(v),s=U(_),d=w(_,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),ce(d)!=="svelte-19nyx7z"&&(d.textContent=f),_.forEach(v),c=U(m),u=w(m,"DIV",{class:!0});var W=x(u);for(let oe=0;oe<g.length;oe+=1)g[oe].l(W);W.forEach(v),h=U(m),o=w(m,"DIV",{class:!0});var B=x(o);b&&b.l(B),N=U(B),Z&&Z.l(B),y=U(B),T=w(B,"BUTTON",{type:!0,class:!0,["data-svelte-h"]:!0}),ce(T)!=="svelte-ymga0p"&&(T.textContent=M),V=U(B),C=w(B,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),ce(C)!=="svelte-4sv8p6"&&(C.textContent=$),O=U(B),B.forEach(v),this.h()},h(){i(r,"class","flex items-center rounded-xl text-lg font-semibold"),i(r,"href",at+j+"/"),i(d,"href",`${j}/`),i(d,"class","flex rounded-lg border bg-white px-2 py-0.5 text-center shadow-sm hover:shadow-none dark:border-gray-600 dark:bg-gray-700"),i(e,"class","sticky top-0 flex flex-none items-center justify-between px-3 py-3.5 max-sm:pt-0"),i(u,"class","scrollbar-custom flex flex-col gap-1 overflow-y-auto rounded-r-xl from-gray-50 px-3 pb-3 pt-2 dark:from-gray-800/30 max-sm:bg-gradient-to-t md:bg-gradient-to-l"),i(T,"type","button"),i(T,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),i(C,"href",j+"/settings"),i(C,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),i(o,"class","mt-0.5 flex flex-col gap-1 rounded-r-xl p-3 text-sm md:bg-gradient-to-l md:from-gray-50 md:dark:from-gray-800/30")},m(m,_){D(m,e,_),p(e,r),q(t,r,null),p(r,a),p(r,l),p(e,s),p(e,d),D(m,c,_),D(m,u,_);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(u,null);D(m,h,_),D(m,o,_),b&&b.m(o,null),p(o,N),Z&&Z.m(o,null),p(o,y),p(o,T),p(o,V),p(o,C),p(o,O),P=!0,E||(L=[re(d,"click",n[3]),re(T,"click",kt)],E=!0)},p(m,[_]){var I,W;if(_&20){R=we(Object.entries(m[2]));let B;for(B=0;B<R.length;B+=1){const oe=ze(m,R,B);g[B]?(g[B].p(oe,_),A(g[B],1)):(g[B]=Ue(oe),g[B].c(),A(g[B],1),g[B].m(u,null))}for(_e(),B=R.length;B<g.length;B+=1)z(B);pe()}(I=m[1])!=null&&I.username||(W=m[1])!=null&&W.email?b?b.p(m,_):(b=Ve(m),b.c(),b.m(o,N)):b&&(b.d(1),b=null),m[0]?Z||(Z=Ze(),Z.c(),Z.m(o,y)):Z&&(Z.d(1),Z=null)},i(m){if(!P){A(t.$$.fragment,m);for(let _=0;_<R.length;_+=1)A(g[_]);P=!0}},o(m){S(t.$$.fragment,m),g=g.filter(Boolean);for(let _=0;_<g.length;_+=1)S(g[_]);P=!1},d(m){m&&(v(e),v(c),v(u),v(h),v(o)),J(t),We(g,m),b&&b.d(),Z&&Z.d(),E=!1,Te(L)}}}function Dt(n,e,r){let t,{conversations:a=[]}=e,{canLogin:l}=e,{user:s}=e;function d(){lt.set(!0)}const f=[new Date().setDate(new Date().getDate()-1),new Date().setDate(new Date().getDate()-7),new Date().setMonth(new Date().getMonth()-1)],c={today:"Today",week:"This week",month:"This month",older:"Older"};function u(o){Ne.call(this,n,o)}function h(o){Ne.call(this,n,o)}return n.$$set=o=>{"conversations"in o&&r(5,a=o.conversations),"canLogin"in o&&r(0,l=o.canLogin),"user"in o&&r(1,s=o.user)},n.$$.update=()=>{n.$$.dirty&32&&r(2,t={today:a.filter(({updatedAt:o})=>o.getTime()>f[0]),week:a.filter(({updatedAt:o})=>o.getTime()>f[1]&&o.getTime()<f[0]),month:a.filter(({updatedAt:o})=>o.getTime()>f[2]&&o.getTime()<f[1]),older:a.filter(({updatedAt:o})=>o.getTime()<f[2])})},[l,s,t,d,c,a,u,h]}class Ye extends ae{constructor(e){super(),le(this,e,Dt,At,ne,{conversations:5,canLogin:0,user:1})}}function Mt(n){let e,r,t,a,l,s,d;return{c(){e=X("svg"),r=X("path"),t=X("path"),a=X("defs"),l=X("radialGradient"),s=X("stop"),d=X("stop"),this.h()},l(f){e=Y(f,"svg",{xmlns:!0,width:!0,height:!0,class:!0,fill:!0,viewBox:!0});var c=x(e);r=Y(c,"path",{fill:!0,d:!0}),x(r).forEach(v),t=Y(c,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),x(t).forEach(v),a=Y(c,"defs",{});var u=x(a);l=Y(u,"radialGradient",{id:!0,cx:!0,cy:!0,r:!0,gradientTransform:!0,gradientUnits:!0});var h=x(l);s=Y(h,"stop",{"stop-color":!0}),x(s).forEach(v),d=Y(h,"stop",{offset:!0,"stop-color":!0}),x(d).forEach(v),h.forEach(v),u.forEach(v),c.forEach(v),this.h()},h(){i(r,"fill","url(#a)"),i(r,"d","M.93 10.65A10.17 10.17 0 0 1 11.11.48h4.67a9.45 9.45 0 0 1 0 18.89H4.53L1.62 22.2a.38.38 0 0 1-.69-.28V10.65Z"),i(t,"fill","#000"),i(t,"fill-rule","evenodd"),i(t,"d","M11.52 7.4a1.86 1.86 0 1 1-3.72 0 1.86 1.86 0 0 1 3.72 0Zm7.57 0a1.86 1.86 0 1 1-3.73 0 1.86 1.86 0 0 1 3.73 0ZM8.9 12.9a.55.55 0 0 0-.11.35.76.76 0 0 1-1.51 0c0-.95.67-1.94 1.76-1.94 1.09 0 1.76 1 1.76 1.94H9.3a.55.55 0 0 0-.12-.35c-.06-.07-.1-.08-.13-.08s-.08 0-.14.08Zm4.04 0a.55.55 0 0 0-.12.35h-1.51c0-.95.68-1.94 1.76-1.94 1.1 0 1.77 1 1.77 1.94h-1.51a.55.55 0 0 0-.12-.35c-.06-.07-.11-.08-.14-.08-.02 0-.07 0-.13.08Zm-1.89.79c-.02 0-.07-.01-.13-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.75 1.95 1.1 0 1.77-1 1.77-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.14.08Zm4.04 0c-.03 0-.08-.01-.14-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.76 1.95 1.08 0 1.76-1 1.76-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.13.08Zm1.76-.44c0-.16.05-.28.12-.35.06-.07.1-.08.13-.08s.08 0 .14.08c.06.07.11.2.11.35a.76.76 0 0 0 1.51 0c0-.95-.67-1.94-1.76-1.94-1.09 0-1.76 1-1.76 1.94h1.5Z"),i(t,"clip-rule","evenodd"),i(s,"stop-color","#FFD21E"),i(d,"offset","1"),i(d,"stop-color","red"),i(l,"id","a"),i(l,"cx","0"),i(l,"cy","0"),i(l,"r","1"),i(l,"gradientTransform","matrix(0 31.37 -34.85 0 13.08 -9.02)"),i(l,"gradientUnits","userSpaceOnUse"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width","1em"),i(e,"height","1em"),i(e,"class",n[0]),i(e,"fill","none"),i(e,"viewBox","0 0 26 23")},m(f,c){D(f,e,c),p(e,r),p(e,t),p(e,a),p(a,l),p(l,s),p(l,d)},p(f,[c]){c&1&&i(e,"class",f[0])},i:ee,o:ee,d(f){f&&v(e)}}}function Ot(n,e,r){let{classNames:t=""}=e;return n.$$set=a=>{"classNames"in a&&r(0,t=a.classNames)},[t]}class Bt extends ae{constructor(e){super(),le(this,e,Ot,Mt,ne,{classNames:0})}}function It(n){let e,r,t,a,l,s,d,f;return t=new Bt({props:{classNames:"text-2xl mr-2"}}),{c(){e=k("div"),r=k("div"),K(t.$$.fragment),a=H(),l=k("h2"),s=he(n[0]),this.h()},l(c){e=w(c,"DIV",{class:!0});var u=x(e);r=w(u,"DIV",{class:!0});var h=x(r);F(t.$$.fragment,h),a=U(h),l=w(h,"H2",{class:!0});var o=x(l);s=me(o,n[0]),o.forEach(v),h.forEach(v),u.forEach(v),this.h()},h(){i(l,"class","font-semibold"),i(r,"class","pointer-events-auto flex items-center rounded-full bg-white/90 px-3 py-1 shadow-sm dark:bg-gray-900/80"),i(e,"class","pointer-events-none fixed right-0 top-12 z-20 bg-gradient-to-bl from-red-500/20 via-red-500/0 to-red-500/0 pb-36 pl-36 pr-2 pt-2 md:top-0 md:pr-8 md:pt-5")},m(c,u){D(c,e,u),p(e,r),q(t,r,null),p(r,a),p(r,l),p(l,s),f=!0},p(c,[u]){(!f||u&1)&&ve(s,c[0])},i(c){f||(A(t.$$.fragment,c),et(()=>{f&&(d||(d=Le(e,Me,{duration:300},!0)),d.run(1))}),f=!0)},o(c){S(t.$$.fragment,c),d||(d=Le(e,Me,{duration:300},!1)),d.run(0),f=!1},d(c){c&&v(e),J(t),c&&d&&d.end()}}}function St(n,e,r){let{message:t=""}=e;return n.$$set=a=>{"message"in a&&r(0,t=a.message)},[t]}class zt extends ae{constructor(e){super(),le(this,e,St,It,ne,{message:0})}}function Pt(n){let e,r;return e=new Ye({props:{conversations:n[0].conversations,user:n[0].user,canLogin:n[0].user===void 0&&n[0].loginEnabled}}),e.$on("shareConversation",n[11]),e.$on("deleteConversation",n[12]),e.$on("editConversationTitle",n[13]),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){q(e,t,a),r=!0},p(t,a){const l={};a&1&&(l.conversations=t[0].conversations),a&1&&(l.user=t[0].user),a&1&&(l.canLogin=t[0].user===void 0&&t[0].loginEnabled),e.$set(l)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Ge(n){let e,r;return e=new zt({props:{message:n[3]}}),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,a){q(e,t,a),r=!0},p(t,a){const l={};a&8&&(l.message=t[3]),e.$set(l)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function jt(n){var ge;let e,r,t,a,l,s,d,f,c,u,h,o,N,y,T,M,V,C,$,O,P,E,L,R,g,z;document.title=ke,O=new yt({props:{isOpen:n[2],title:(ge=n[0].conversations.find(n[14]))==null?void 0:ge.title,$$slots:{default:[Pt]},$$scope:{ctx:n}}}),O.$on("toggle",n[15]),L=new Ye({props:{conversations:n[0].conversations,user:n[0].user,canLogin:n[0].user===void 0&&n[0].loginEnabled}}),L.$on("shareConversation",n[16]),L.$on("deleteConversation",n[17]),L.$on("editConversationTitle",n[18]);let b=n[3]&&Ge(n);const Z=n[10].default,G=Re(Z,n,n[19],null);return{c(){e=k("meta"),r=k("meta"),t=k("meta"),a=k("meta"),l=k("meta"),s=k("meta"),f=k("meta"),u=k("link"),o=k("link"),y=k("link"),M=k("link"),C=H(),$=k("div"),K(O.$$.fragment),P=H(),E=k("nav"),K(L.$$.fragment),R=H(),b&&b.c(),g=H(),G&&G.c(),this.h()},l(m){const _=tt("svelte-te1x4x",document.head);e=w(_,"META",{name:!0,content:!0}),r=w(_,"META",{name:!0,content:!0}),t=w(_,"META",{name:!0,content:!0}),a=w(_,"META",{property:!0,content:!0}),l=w(_,"META",{property:!0,content:!0}),s=w(_,"META",{property:!0,content:!0}),f=w(_,"META",{property:!0,content:!0}),u=w(_,"LINK",{rel:!0,href:!0,sizes:!0}),o=w(_,"LINK",{rel:!0,href:!0,type:!0}),y=w(_,"LINK",{rel:!0,href:!0}),M=w(_,"LINK",{rel:!0,href:!0}),_.forEach(v),C=U(m),$=w(m,"DIV",{class:!0});var I=x($);F(O.$$.fragment,I),P=U(I),E=w(I,"NAV",{class:!0});var W=x(E);F(L.$$.fragment,W),W.forEach(v),R=U(I),b&&b.l(I),g=U(I),G&&G.l(I),I.forEach(v),this.h()},h(){i(e,"name","description"),i(e,"content","The first open source alternative to ChatGPT. 💪"),i(r,"name","twitter:card"),i(r,"content","summary_large_image"),i(t,"name","twitter:site"),i(t,"content","@huggingface"),i(a,"property","og:title"),i(a,"content",ke),i(l,"property","og:type"),i(l,"content","website"),i(s,"property","og:url"),i(s,"content",d=""+(n[1].url.origin+j)),i(f,"property","og:image"),i(f,"content",c=n[1].url.origin+j+"/"+Q+"/thumbnail.png"),i(u,"rel","icon"),i(u,"href",h=n[1].url.origin+j+"/"+Q+"/favicon.ico"),i(u,"sizes","32x32"),i(o,"rel","icon"),i(o,"href",N=n[1].url.origin+j+"/"+Q+"/icon.svg"),i(o,"type","image/svg+xml"),i(y,"rel","apple-touch-icon"),i(y,"href",T=n[1].url.origin+j+"/"+Q+"/apple-touch-icon.png"),i(M,"rel","manifest"),i(M,"href",V=n[1].url.origin+j+"/"+Q+"/manifest.json"),i(E,"class","grid max-h-screen grid-cols-1 grid-rows-[auto,1fr,auto] max-md:hidden"),i($,"class","grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd dark:text-gray-300 md:grid-cols-[280px,1fr] md:grid-rows-[1fr]")},m(m,_){p(document.head,e),p(document.head,r),p(document.head,t),p(document.head,a),p(document.head,l),p(document.head,s),p(document.head,f),p(document.head,u),p(document.head,o),p(document.head,y),p(document.head,M),D(m,C,_),D(m,$,_),q(O,$,null),p($,P),p($,E),q(L,E,null),p($,R),b&&b.m($,null),p($,g),G&&G.m($,null),z=!0},p(m,[_]){var B;(!z||_&2&&d!==(d=""+(m[1].url.origin+j)))&&i(s,"content",d),(!z||_&2&&c!==(c=m[1].url.origin+j+"/"+Q+"/thumbnail.png"))&&i(f,"content",c),(!z||_&2&&h!==(h=m[1].url.origin+j+"/"+Q+"/favicon.ico"))&&i(u,"href",h),(!z||_&2&&N!==(N=m[1].url.origin+j+"/"+Q+"/icon.svg"))&&i(o,"href",N),(!z||_&2&&T!==(T=m[1].url.origin+j+"/"+Q+"/apple-touch-icon.png"))&&i(y,"href",T),(!z||_&2&&V!==(V=m[1].url.origin+j+"/"+Q+"/manifest.json"))&&i(M,"href",V);const I={};_&4&&(I.isOpen=m[2]),_&3&&(I.title=(B=m[0].conversations.find(m[14]))==null?void 0:B.title),_&524289&&(I.$$scope={dirty:_,ctx:m}),O.$set(I);const W={};_&1&&(W.conversations=m[0].conversations),_&1&&(W.user=m[0].user),_&1&&(W.canLogin=m[0].user===void 0&&m[0].loginEnabled),L.$set(W),m[3]?b?(b.p(m,_),_&8&&A(b,1)):(b=Ge(m),b.c(),A(b,1),b.m($,g)):b&&(_e(),S(b,1,1,()=>{b=null}),pe()),G&&G.p&&(!z||_&524288)&&Ke(G,Z,m,m[19],z?qe(Z,m[19],_,null):Fe(m[19]),null)},i(m){z||(A(O.$$.fragment,m),A(L.$$.fragment,m),A(b),A(G,m),z=!0)},o(m){S(O.$$.fragment,m),S(L.$$.fragment,m),S(b),S(G,m),z=!1},d(m){m&&(v(C),v($)),v(e),v(r),v(t),v(a),v(l),v(s),v(f),v(u),v(o),v(y),v(M),J(O),J(L),b&&b.d(),G&&G.d(m)}}}function Ht(n,e,r){let t,a,l,s;ue(n,Xe,g=>r(1,a=g)),ue(n,Ie,g=>r(8,l=g)),ue(n,ie,g=>r(9,s=g));let{$$slots:d={},$$scope:f}=e,{data:c}=e,u=!1,h,o;async function N(){s&&o&&s!==o&&(clearTimeout(h),r(3,o=null),await new Promise(g=>setTimeout(g,300))),r(3,o=s),h=setTimeout(()=>{se(ie,s=null,s),r(3,o=null)},3e3)}async function y(g){try{if(!(await fetch(`${j}/conversation/${g}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){se(ie,s="Error while deleting conversation, try again.",s);return}a.params.id!==g?await De(Oe.ConversationList):await Ae(`${j}/`,{invalidateAll:!0})}catch(z){console.error(z),se(ie,s=String(z),s)}}async function T(g,z){try{if(!(await fetch(`${j}/conversation/${g}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:z})})).ok){se(ie,s="Error while editing title, try again.",s);return}await De(Oe.ConversationList)}catch(b){console.error(b),se(ie,s=String(b),s)}}rt(()=>{clearTimeout(h)});const M=ot(c.settings);ue(n,M,g=>r(7,t=g));const V=g=>Be(g.detail.id,g.detail.title),C=g=>y(g.detail),$=g=>T(g.detail.id,g.detail.title),O=g=>g.id===a.params.id,P=g=>r(2,u=g.detail),E=g=>Be(g.detail.id,g.detail.title),L=g=>y(g.detail),R=g=>T(g.detail.id,g.detail.title);return n.$$set=g=>{"data"in g&&r(0,c=g.data),"$$scope"in g&&r(19,f=g.$$scope)},n.$$.update=()=>{if(n.$$.dirty&512&&s&&N(),n.$$.dirty&257&&l){const g=c.conversations.findIndex(({id:z})=>z===(l==null?void 0:l.convId));g!=-1&&r(0,c.conversations[g].title=(l==null?void 0:l.title)??c.conversations[g].title,c),r(0,c.conversations=[...c.conversations],c),se(Ie,l=null,l)}n.$$.dirty&130&&a.url.searchParams.has("model")&&(t.activeModel===a.url.searchParams.get("model")&&Ae(`${j}/?`),se(M,t.activeModel=a.url.searchParams.get("model")??t.activeModel,t))},[c,a,u,o,y,T,M,t,l,s,d,V,C,$,O,P,E,L,R,f]}class Yt extends ae{constructor(e){super(),le(this,e,Ht,jt,ne,{data:0})}}export{Yt as component};
